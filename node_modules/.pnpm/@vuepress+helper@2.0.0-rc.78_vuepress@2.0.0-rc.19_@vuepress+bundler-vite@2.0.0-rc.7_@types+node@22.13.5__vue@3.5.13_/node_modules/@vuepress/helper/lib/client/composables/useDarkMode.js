import { useMutationObserver } from '@vueuse/core';
import { onMounted, readonly, ref } from 'vue';
import { getDarkMode } from '../utils/index.js';
let darkmode = null;
const _useDarkMode = () => {
    const isDarkMode = ref(false);
    onMounted(() => {
        isDarkMode.value = getDarkMode();
        // Watch darkmode change
        useMutationObserver(document.documentElement, () => {
            isDarkMode.value = getDarkMode();
        }, {
            attributeFilter: ['data-theme'],
            attributes: true,
        });
    });
    return readonly(isDarkMode);
};
/**
 * Get darkmode status
 *
 * @returns readonly darkmode ref
 */
// eslint-disable-next-line no-return-assign
export const useDarkMode = () => (darkmode ??= _useDarkMode());
