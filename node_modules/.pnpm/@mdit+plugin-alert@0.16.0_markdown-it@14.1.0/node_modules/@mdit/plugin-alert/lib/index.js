const N=/^>(?:(?: {0,3})| {0,2}\t {0,1})\[!(.*)\]\s*$/i,O=(i,{alertNames:A=["tip","warning","caution","important","note"],deep:v=!1,openRender:M,closeRender:I,titleRender:y}={})=>{const R=(e,s,o,T)=>{if(e.sCount[s]-e.blkIndent>=4||e.level!==0&&!v)return!1;const S=e.bMarks[s]+e.tShift[s],$=e.eMarks[s];if(e.src.charAt(S)!==">")return!1;const f=N.exec(e.src.slice(S,$));if(!f||!A.includes(f[1].toLowerCase()))return!1;if(T)return!0;const k=f[1].toLowerCase(),p=[],b=[],h=[],u=[],q=e.lineMax,J=e.parentType,L=e.md.block.ruler.getRules("alert");e.parentType="alert";let t;for(t=s+1;t<o;t++){let r=!1,x=!1,a=e.bMarks[t]+e.tShift[t];const m=e.eMarks[t],E=e.sCount[t]<e.blkIndent;if(a>=m)break;if(e.src.charAt(a++)===">"&&!E){let l,c=e.sCount[t]+1;e.src.charAt(a)===" "?(a++,c++,r=!1,l=!0):e.src.charAt(a)==="	"?(l=!0,(e.bsCount[t]+c)%4===3?(a++,c++,r=!1):r=!0):l=!1;let d=c;for(p.push(e.bMarks[t]),e.bMarks[t]=a;a<m;){const g=e.src.charAt(a);if(g==="	")d+=4-(d+e.bsCount[t]+(r?1:0))%4;else if(g===" ")d++;else break;a++}x=a>=m,b.push(e.bsCount[t]),e.bsCount[t]=e.sCount[t]+1+(l?1:0),h.push(e.sCount[t]),e.sCount[t]=d-c,u.push(e.tShift[t]),e.tShift[t]=a-e.bMarks[t];continue}if(x)break;let _=!1;for(const l of L)if(l(e,t,o,!0)){_=!0;break}if(_){e.lineMax=t,e.blkIndent!==0&&(p.push(e.bMarks[t]),b.push(e.bsCount[t]),u.push(e.tShift[t]),h.push(e.sCount[t]),e.sCount[t]-=e.blkIndent);break}p.push(e.bMarks[t]),b.push(e.bsCount[t]),u.push(e.tShift[t]),h.push(e.sCount[t]),e.sCount[t]=-1}const j=e.blkIndent;e.blkIndent=0;const z=[s,s+1],w=[s+1,0],C=e.push("alert_open","div",1);C.markup=k,C.attrJoin("class",`markdown-alert markdown-alert-${k}`),C.map=w;const n=e.push("alert_title","",0);n.attrJoin("class","markdown-alert-title"),n.markup=k,n.content=f[1],n.map=z,e.md.block.tokenize(e,s+1,t);const B=e.push("alert_close","div",-1);B.markup=k,e.lineMax=q,e.parentType=J,w[1]=e.line;for(let r=0;r<u.length;r++)e.bMarks[r+s]=p[r],e.tShift[r+s]=u[r],e.sCount[r+s]=h[r],e.bsCount[r+s]=b[r];return e.blkIndent=j,!0};i.block.ruler.before("blockquote","alert",R,{alt:["paragraph","reference","blockquote","list"]}),M&&(i.renderer.rules.alert_open=M),I&&(i.renderer.rules.alert_close=I),i.renderer.rules.alert_title=y??((e,s)=>{const o=e[s];return`<p class="markdown-alert-title">${o.content[0].toUpperCase()+o.content.substring(1).toLowerCase()}</p>
`})};export{O as alert};
//# sourceMappingURL=index.js.map
