{"version":3,"file":"index.js","sources":["../../src/node/prepareThemeData.ts","../../src/node/themeDataPlugin.ts"],"sourcesContent":["import type { App } from 'vuepress/core'\nimport type { ThemeData } from '../shared/index.js'\n\nconst HMR_CODE = `\nif (import.meta.webpackHot) {\n  import.meta.webpackHot.accept()\n  if (__VUE_HMR_RUNTIME__.updateThemeData) {\n    __VUE_HMR_RUNTIME__.updateThemeData(themeData)\n  }\n}\n\nif (import.meta.hot) {\n  import.meta.hot.accept(({ themeData }) => {\n    __VUE_HMR_RUNTIME__.updateThemeData(themeData)\n  })\n}\n`\n\nexport const prepareThemeData = async (\n  app: App,\n  themeData: ThemeData,\n): Promise<void> => {\n  // theme data file content\n  let content = `\\\nexport const themeData = JSON.parse(${JSON.stringify(\n    JSON.stringify(themeData),\n  )})\n`\n\n  // inject HMR code\n  if (app.env.isDev) {\n    content += HMR_CODE\n  }\n\n  await app.writeTemp('internal/themeData.js', content)\n}\n","import type { Plugin } from 'vuepress/core'\nimport { getDirname, path } from 'vuepress/utils'\nimport type { ThemeData } from '../shared/index.js'\nimport { prepareThemeData } from './prepareThemeData.js'\n\nconst __dirname = import.meta.dirname || getDirname(import.meta.url)\n\n/**\n * Options of @vuepress/plugin-theme-data\n */\nexport interface ThemeDataPluginOptions {\n  /**\n   * Theme data to be used in client side\n   */\n  themeData: ThemeData\n}\n\nexport const themeDataPlugin = ({\n  themeData,\n}: ThemeDataPluginOptions): Plugin => ({\n  name: '@vuepress/plugin-theme-data',\n\n  clientConfigFile: path.resolve(__dirname, '../client/config.js'),\n\n  onPrepared: (app) => prepareThemeData(app, themeData),\n})\n"],"names":["HMR_CODE","prepareThemeData","app","themeData","content","__dirname","getDirname","themeDataPlugin","path"],"mappings":"sDAGA,MAAMA,EAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAeJC,EAAmB,MAC9BC,EACAC,IACkB,CAElB,IAAIC,EAAU,uCACsB,KAAK,UACvC,KAAK,UAAUD,CAAS,CAC1B,CAAC;AAAA,EAIGD,EAAI,IAAI,QACVE,GAAWJ,GAGb,MAAME,EAAI,UAAU,wBAAyBE,CAAO,CACtD,EC9BMC,EAAY,YAAY,SAAWC,EAAW,YAAY,GAAG,EAYtDC,EAAkB,CAAC,CAC9B,UAAAJ,CACF,KAAuC,CACrC,KAAM,8BAEN,iBAAkBK,EAAK,QAAQH,EAAW,qBAAqB,EAE/D,WAAaH,GAAQD,EAAiBC,EAAKC,CAAS,CACtD"}