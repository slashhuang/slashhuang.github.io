
 <!DOCTYPE HTML>
<html lang="en">
<head>
  <meta charset="UTF-8">
  
    <title>slashhuang的技术博客</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="slashhuang">
    

    
    <meta name="description" content="slashhuang的技术博客">
<meta property="og:type" content="website">
<meta property="og:title" content="slashhuang的技术博客">
<meta property="og:url" content="http://slashhuang.github.io/index.html">
<meta property="og:site_name" content="slashhuang的技术博客">
<meta property="og:description" content="slashhuang的技术博客">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="slashhuang的技术博客">
<meta name="twitter:description" content="slashhuang的技术博客">

    
    <link rel="alternative" href="/atom.xml" title="slashhuang的技术博客" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/sunflower.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/sunflower.jpg">
    
    <link rel="stylesheet" href="/css/style.css">
  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?01891ef906288b6beb422abdad210ee6";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-74045988-1', 'auto');
    ga('send', 'pageview');

  </script>
</head>

  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.jpg" alt="slashhuang的技术博客" title="slashhuang的技术博客"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="slashhuang的技术博客">slashhuang的技术博客</a></h1>
				<h2 class="blog-motto"></h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="Menu">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">主页</a></li>
					
						<li><a href="/archives">目录</a></li>
					
						<li><a href="/about">关于作者</a></li>
					
						<li><a href="/essay">随笔</a></li>
					
						<li><a href="/weeknote">周记</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="Search" />
						<input type="hidden" name="q" value="site:slashhuang.github.io">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main">

   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/08/03/webpack/plugin/" title="webpack少用的插件" itemprop="url">webpack少用的插件</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="slashhuang" target="_blank" itemprop="author">slashhuang</a>
		
  <p class="article-time">
    <time datetime="2016-08-03T15:00:14.000Z" itemprop="datePublished"> Published 2016-08-03</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><blockquote>
<p>之前捣腾angular2和typescript发现一些用的少,但是蛮犀利的webpack插件</p>
</blockquote>
<h3 id="html-webpack-plugin"><a href="#html-webpack-plugin" class="headerlink" title="html-webpack-plugin"></a>html-webpack-plugin</h3><blockquote>
<p>它可以将webpackConfig的数据,作为元数据渲染进html模板,借助这一点,可以做一些开发、生产环境的配置</p>
</blockquote>
<h3 id="definePlugin"><a href="#definePlugin" class="headerlink" title="definePlugin"></a>definePlugin</h3><blockquote>
<p>在全局环境中配置,自定义变量。一般在写框架或者组件的时候用的比较多</p>
</blockquote>
<h3 id="providePlugin"><a href="#providePlugin" class="headerlink" title="providePlugin"></a>providePlugin</h3><blockquote>
<p>提供动态require组件的便利性,也是神器</p>
</blockquote>
<h3 id="webpack配置容易踩坑点"><a href="#webpack配置容易踩坑点" class="headerlink" title="webpack配置容易踩坑点"></a>webpack配置容易踩坑点</h3><blockquote>
<p>resolve.alias记住要用path.resolve写成绝对路径啊,不然引用的时候加上一些莫名其妙的__dirname就纠结了。<br>entry对象中,不要存在循环嵌套,不然webpack编译的时候,分分钟死循环啊</p>
</blockquote>
<h3 id="process-cwd"><a href="#process-cwd" class="headerlink" title="process.cwd()"></a>process.cwd()</h3><blockquote>
<p>这个是个神器,用好了node的启动目录,就不必放心思在文件路径上了</p>
</blockquote>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/webpack/">webpack</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/07/20/nodejs/path/" title="node核心模块之path" itemprop="url">node核心模块之path</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="slashhuang" target="_blank" itemprop="author">slashhuang</a>
		
  <p class="article-time">
    <time datetime="2016-07-20T05:49:08.000Z" itemprop="datePublished"> Published 2016-07-20</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h1><blockquote>
<p>path模块在nodejs中属于核心模块，目前状态是stable。<br>path模块提供了文件、目录等的使用机制。</p>
</blockquote>
<h3 id="Windows-vs-POSIX"><a href="#Windows-vs-POSIX" class="headerlink" title="Windows vs POSIX"></a>Windows vs POSIX</h3><blockquote>
<p>在Windows和posix[例如*nix等的可移植操作系统接口实现平台]中可以轻松使用同一套API来操作文件和目录。<br>由于windows和POSIX使用不同的系统文件分隔符[一个是<code>\</code>,一个是<code>/</code>]。<br>因此nodejs提供了path.win32[方法名称]和path.posix[方法名称]来处理不同开发环境对任何操作系统的路径兼容  </p>
</blockquote>
<h3 id="方法名列举"><a href="#方法名列举" class="headerlink" title="方法名列举"></a>方法名列举</h3><ul>
<li>basename[path[,ext]]  ===&gt; 返回路径中的最后一块【和*nix系统中的basename命令基本保持一致】</li>
<li>delimiter====&gt; 返回不同操作系统中对于环境变量<code>process.env.PATH</code>的分隔符</li>
<li>dirname(path) ===&gt;  返回目录名称【和*nix系统的dirname命令基本一致】</li>
<li>extname(path) ===&gt; 返回参数的basename从末尾到最后一个<code>.</code>出现的值</li>
<li>format(pathObject) ===&gt; 参数是一个对象，就是将路径拆解了而已</li>
<li>isAbsolute(path) ===&gt; 返回一个boolean值，来表示是否参数为绝对路径形式</li>
<li>join([path[,…]]) ===&gt; 用系统路径分隔符来连接所有的参数，然后normalize返回的结果</li>
<li>normalize(path) ===&gt; 处理路径中存在的<code>\</code>、<code>/</code>、<code>..</code>、<code>.</code>等，和<code>cd</code>命令基本一致</li>
<li>parse(path) ===&gt; 处理路径为format的形式</li>
<li>relative(from,to) ===&gt; 返回从from到to需要resolve的相对路径</li>
<li>resolve([path[,…]]) ===&gt; 处理路径命令【类似cd】</li>
<li>sep ==&gt; 返回系统路径分隔符</li>
</ul>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/nodejs/">nodejs</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/06/25/react/react-update/" title="react-update" itemprop="url">react-update</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="slashhuang" target="_blank" itemprop="author">slashhuang</a>
		
  <p class="article-time">
    <time datetime="2016-06-24T17:44:45.000Z" itemprop="datePublished"> Published 2016-06-25</time>
    
  </p>
</header>
    <div class="article-content">
        
        <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">enqueueUpdate</span>(<span class="params">component</span>) </span>&#123;</span><br><span class="line">ensureInjected();</span><br><span class="line">    <span class="comment">// Various parts of our code (such as ReactCompositeComponent's</span></span><br><span class="line">    <span class="comment">// _renderValidatedComponent) assume that calls to render aren't nested;</span></span><br><span class="line">    <span class="comment">// verify that that's the case. (This is called by each top-level update</span></span><br><span class="line">    <span class="comment">// function, like setProps, setState, forceUpdate, etc.; creation and</span></span><br><span class="line">    <span class="comment">// destruction of top-level components is guarded in ReactMount.)</span></span><br><span class="line">    <span class="keyword">if</span> (!batchingStrategy.isBatchingUpdates) &#123;</span><br><span class="line">        batchingStrategy.batchedUpdates(enqueueUpdate, component);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    dirtyComponents.push(component);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h3 id="源码的结论"><a href="#源码的结论" class="headerlink" title="源码的结论"></a>源码的结论</h3><ul>
<li>react在执行top-level事件的时候，在整个冒泡及生命周期中会有个更新策略，等到所有的脏元素准备就绪的时候(在settimeout之前，在冒泡结束节点)，统一执行setState。 </li>
<li>react在执行非top-level事件的时候，会执行batchUpdate，进行局部的state的更新。完成dom树的patch</li>
</ul>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/react/">react</a><a href="/tags/算法/">算法</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/06/22/前端开发/fe-development/" title="前后端未分离下的开发" itemprop="url">前后端未分离下的开发</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="slashhuang" target="_blank" itemprop="author">slashhuang</a>
		
  <p class="article-time">
    <time datetime="2016-06-22T14:32:46.000Z" itemprop="datePublished"> Published 2016-06-22</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h2><blockquote>
<p>前端开发主要分为前后端分离，以及服务端渲染两块。<br>对于前者直接Ajax交互数据即可，对于后者却存在一些开发配置上的麻烦。<br>正好借鉴爱屋吉屋的一些做法总结下</p>
</blockquote>
<h2 id="开发搭建"><a href="#开发搭建" class="headerlink" title="开发搭建"></a>开发搭建</h2><ul>
<li>配置本地host</li>
<li>本地起nginx服务做静态资源的反向代理,指向本地的开发目录</li>
<li>下载后端项目，配置access control allow origin,启动服务</li>
</ul>
<h2 id="关于nginx的优点"><a href="#关于nginx的优点" class="headerlink" title="关于nginx的优点"></a>关于nginx的优点</h2><ul>
<li>负载均衡:   主流的cdn静态资源负载分发</li>
<li>缓存配置:   buffer住request和response，使得后端服务更加专注于服务逻辑，减少并发压力</li>
<li>灵活配置:   nginx 的location结合正则表达式可以灵活的实现本地调试各个开发环境。经过调试，正则依赖完整的路径，而非目录</li>
</ul>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/server/">server</a><a href="/tags/前端开发环境/">前端开发环境</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/06/13/前端性能/dev-tool/" title="web_performance" itemprop="url">web_performance</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="slashhuang" target="_blank" itemprop="author">slashhuang</a>
		
  <p class="article-time">
    <time datetime="2016-06-13T02:36:57.000Z" itemprop="datePublished"> Published 2016-06-13</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h3 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h3><blockquote>
<p>这是一篇资源收集的文章，关于chrome浏览器的devTool工具<br>这是一篇关于提升vue渲染性能的资料收集</p>
</blockquote>
<h3 id="资源地址"><a href="#资源地址" class="headerlink" title="资源地址"></a>资源地址</h3><p><a href="http://www.slideshare.net/linx4200/uc-49535651" target="_blank" rel="external">chrome dev-tool开发者工具</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/性能/">性能</a><a href="/tags/javascript/">javascript</a><a href="/tags/调试/">调试</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/06/09/模板引擎/template/" title="模板引擎小尝试" itemprop="url">模板引擎小尝试</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="slashhuang" target="_blank" itemprop="author">slashhuang</a>
		
  <p class="article-time">
    <time datetime="2016-06-08T16:19:48.000Z" itemprop="datePublished"> Published 2016-06-09</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h2><blockquote>
<p>模板引擎是现在前端框架必须处理的一部分，无论是DOM层面还是V-dom层面，各有各的实现。<br>最近正想尝试下自己写套模板引擎，也在借鉴一些主流的库的写法。<br>这篇博客将会针对模板引擎持续更新研究结果。</p>
</blockquote>
<h2 id="dom层面的模板引擎"><a href="#dom层面的模板引擎" class="headerlink" title="dom层面的模板引擎"></a>dom层面的模板引擎</h2><h5 id="1-基本功能规划"><a href="#1-基本功能规划" class="headerlink" title="1.基本功能规划"></a>1.基本功能规划</h5><p>1.支持数据填充<br>2.支持简单的JS表达式</p>
<h5 id="2-功能实现规划"><a href="#2-功能实现规划" class="headerlink" title="2.功能实现规划"></a>2.功能实现规划</h5><p>1.利用正则匹配特定的标示，比如&lt;%%&gt;等<br>2.对于简单的JS表达式，转化为函数形式<br>3.采用 new Function(‘identifier’,functionString)生成函数</p>
<h2 id="代码地址"><a href="#代码地址" class="headerlink" title="代码地址:"></a>代码地址:</h2><ol>
<li>domString层面的模板引擎处理,点击如下链接<br><a href="https://github.com/slashhuang/template-engine/blob/master/js/template.js" target="_blank" rel="external">github开源地址</a></li>
</ol>
<blockquote>
<p>夜深了，不能搞太晚，后续文档之后补上。mark下代码时间 [16.6.9 01:25]</p>
</blockquote>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/template/">template</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/06/06/jsbridge/jsbridge/" title="安卓和IOS的jsbridge实现机理梳理" itemprop="url">安卓和IOS的jsbridge实现机理梳理</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="slashhuang" target="_blank" itemprop="author">slashhuang</a>
		
  <p class="article-time">
    <time datetime="2016-06-06T12:20:33.000Z" itemprop="datePublished"> Published 2016-06-06</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h2><blockquote>
<p>jsbride在hybrid中是应用非常广泛的，它的实现机理也很简单<br>===&gt; 调用native提供的可以阅读到window对象的UI类，按照协议规范进行发出请求。<br>===&gt; 在window对象利用sub/pub设计模式，代理随机callbackId对象来承载回调函数，<br>===&gt; 发出请求【具体的有iframe方法】(ios中用的多)，或者通用事件【window.prompt劫持】来实现通信。<br>===&gt; 当然各家有各家的方式。</p>
</blockquote>
<h3 id="1、安卓java中的实现"><a href="#1、安卓java中的实现" class="headerlink" title="1、安卓java中的实现"></a>1、安卓java中的实现</h3><blockquote>
<p>  native调用js:    WebView.loadUrl(“JavaScript:function()”)<br>  js调用native：   WebView有一个方法，叫setWebChromeClient。它的<br>onJsAlert,onJsConfirm,onJsPrompt方法将会在js调用window对象的对应的方法alert、confirm、prompt时候被触发。</p>
</blockquote>
<h3 id="看码分析"><a href="#看码分析" class="headerlink" title="看码分析"></a>看码分析</h3><h4 id="1、h5代码"><a href="#1、h5代码" class="headerlink" title="1、h5代码"></a>1、h5代码</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;button onclick="JSBridge._call('bridge','showToast',</span><br><span class="line">                &#123;'msg':'Hello JSBridge'&#125;,</span><br><span class="line">                function(res)&#123;alert(JSON.stringify(res))&#125;)"&gt;</span><br><span class="line">                测试showToast</span><br><span class="line">            &lt;/button&gt;</span><br></pre></td></tr></table></figure>
<h4 id="2、js代码"><a href="#2、js代码" class="headerlink" title="2、js代码"></a>2、js代码</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">var</span> Util = &#123;</span><br><span class="line">          getUri:<span class="function"><span class="keyword">function</span>(<span class="params">obj, method, params, port</span>)</span>&#123;</span><br><span class="line">              params = <span class="keyword">this</span>.getParam(params);</span><br><span class="line">              <span class="keyword">var</span> uri = <span class="string">'JSBridge'</span> + <span class="string">'://'</span> + obj + <span class="string">':'</span> + port + <span class="string">'/'</span> + method + <span class="string">'?'</span> + params;</span><br><span class="line">              <span class="keyword">return</span> uri;</span><br><span class="line">          &#125;,</span><br><span class="line">          getParam:<span class="function"><span class="keyword">function</span>(<span class="params">obj</span>)</span>&#123;</span><br><span class="line">              <span class="keyword">if</span> (obj &amp;&amp; <span class="keyword">typeof</span> obj === <span class="string">'object'</span>) &#123;</span><br><span class="line">                  <span class="keyword">return</span> <span class="built_in">JSON</span>.stringify(obj);</span><br><span class="line">              &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                  <span class="keyword">return</span> obj || <span class="string">''</span>;</span><br><span class="line">              &#125;</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;;             </span><br><span class="line"><span class="keyword">var</span> JSBridge=&#123;&#125;;</span><br><span class="line">JSBridge.callbacks=&#123;&#125;;</span><br><span class="line">JSBridge._call=<span class="function"><span class="keyword">function</span> (<span class="params">obj, method, params, callback</span>) </span>&#123;</span><br><span class="line">                           <span class="keyword">var</span> port = <span class="built_in">Math</span>.random();</span><br><span class="line">                           <span class="keyword">this</span>.callbacks[port] = callback;</span><br><span class="line">                           <span class="keyword">var</span> uri=Util.getUri(obj,method,params,port);</span><br><span class="line">                           <span class="built_in">window</span>.prompt(uri, <span class="string">""</span>);</span><br><span class="line">                       &#125;;</span><br></pre></td></tr></table></figure>
<hr>
<blockquote>
<p>至此，前端层面层面代码结束，下面开始native层面的代码。</p>
</blockquote>
<h5 id="3、native部分将js传来的uri获取到-编写一个WebChromeClient子类"><a href="#3、native部分将js传来的uri获取到-编写一个WebChromeClient子类" class="headerlink" title="3、native部分将js传来的uri获取到[编写一个WebChromeClient子类]"></a>3、native部分将js传来的uri获取到[编写一个WebChromeClient子类]</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JSBridgeWebChromeClient</span> <span class="keyword">extends</span> <span class="title">WebChromeClient</span> </span>&#123;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onJsPrompt</span><span class="params">(WebView view, String url, String message, String defaultValue, JsPromptResult result)</span> </span>&#123;</span><br><span class="line">    result.confirm(JSBridge.callJava(view, message));</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="4、native部分将该对象设置给WebView"><a href="#4、native部分将该对象设置给WebView" class="headerlink" title="4、native部分将该对象设置给WebView"></a>4、native部分将该对象设置给WebView</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">WebView mWebView = (WebView) findViewById(R.id.webview);</span><br><span class="line">WebSettings settings = mWebView.getSettings();</span><br><span class="line">settings.setJavaScriptEnabled(<span class="keyword">true</span>);</span><br><span class="line">mWebView.setWebChromeClient(<span class="keyword">new</span> JSBridgeWebChromeClient());</span><br><span class="line">mWebView.loadUrl(<span class="string">"file:///android_asset/index.html"</span>);</span><br></pre></td></tr></table></figure>
<h5 id="5、native部分创建事件映射池"><a href="#5、native部分创建事件映射池" class="headerlink" title="5、native部分创建事件映射池"></a>5、native部分创建事件映射池</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JSBridge</span> </span>&#123;<span class="comment">/*创建映射池，具体实现不写出来了*/</span>&#125;</span><br><span class="line">JSBridge.register(<span class="string">"jsName"</span>,javaClass.class)； <span class="comment">//注册方法</span></span><br><span class="line">JSBridge.trigger(view,message);<span class="comment">//执行方法</span></span><br></pre></td></tr></table></figure>
<h5 id="6、webview和前端参数整合起来，传入要唤醒的native组件"><a href="#6、webview和前端参数整合起来，传入要唤醒的native组件" class="headerlink" title="6、webview和前端参数整合起来，传入要唤醒的native组件"></a>6、webview和前端参数整合起来，传入要唤醒的native组件</h5><h2 id="IOS部分其实也差不多"><a href="#IOS部分其实也差不多" class="headerlink" title="IOS部分其实也差不多"></a>IOS部分其实也差不多</h2><h5 id="1、native调用js：-stringByEvaluatingJavaScriptFromString"><a href="#1、native调用js：-stringByEvaluatingJavaScriptFromString" class="headerlink" title="1、native调用js： stringByEvaluatingJavaScriptFromString"></a>1、native调用js： stringByEvaluatingJavaScriptFromString</h5><h5 id="2、js调用native代码-在UIWebView内发起的所有网络请求，通过delegate函数在Native层得到通知。"><a href="#2、js调用native代码-在UIWebView内发起的所有网络请求，通过delegate函数在Native层得到通知。" class="headerlink" title="2、js调用native代码:   在UIWebView内发起的所有网络请求，通过delegate函数在Native层得到通知。"></a>2、js调用native代码:   在UIWebView内发起的所有网络请求，通过delegate函数在Native层得到通知。</h5><h2 id="结尾"><a href="#结尾" class="headerlink" title="结尾"></a>结尾</h2><blockquote>
<p>JSbridge是个hybrid应用开发中非常常见的话题，其实也没有什么神秘的。<br>一个好的JSbridge是需要很好的设计模式的，yeap！</p>
</blockquote>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/jsbridge/">jsbridge</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/06/02/前端性能/web-performance/" title="web_performance" itemprop="url">web_performance</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="slashhuang" target="_blank" itemprop="author">slashhuang</a>
		
  <p class="article-time">
    <time datetime="2016-06-01T16:36:57.000Z" itemprop="datePublished"> Published 2016-06-02</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h3 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h3><blockquote>
<p>关于性能问题一直是现代前端工程必须讨论的话题,这是一篇小总结和资源收集的博客.</p>
</blockquote>
<h3 id="淘宝、百度、大众点评的方案对比"><a href="#淘宝、百度、大众点评的方案对比" class="headerlink" title="淘宝、百度、大众点评的方案对比"></a>淘宝、百度、大众点评的方案对比</h3><ul>
<li>百度: 采用前端架构工具fis，采用hash算法进行文件级别的版本控制，典型的资源URL:<a href="http://xxx.a_1232.js" target="_blank" rel="external">http://xxx.a_1232.js</a></li>
<li>淘宝: [虽然我没去过阿里]，采用开发版本号进行代码管理,典型的资源URL:<a href="http://g.alicdn.com/tb-page/taobao-home/0.0.62/index.css" target="_blank" rel="external">http://g.alicdn.com/tb-page/taobao-home/0.0.62/index.css</a></li>
<li>大众点评: 和淘宝方案类似,采用架构工具cortex进行开发版本层面的代码控制,依赖于cortex.json进行代码发布.url形式和淘宝类似。</li>
</ul>
<h3 id="cache-control"><a href="#cache-control" class="headerlink" title="cache-control"></a>cache-control</h3><blockquote>
<p>当然，对比下来，百度的方案是最优的，技术含量上面也可以说最高。<br>主流的大公司都会设置cache-control很长的时间，尽量优化网络请求。<br>淘宝采用了dns-prefetch进行TCP优化[对流量大的电商网站来说，这确实能节约不少时间]</p>
</blockquote>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ul>
<li>配置超长时间的本地缓存 —— 节省带宽，提高性能</li>
<li>采用内容摘要作为缓存更新依据 —— 精确的缓存控制</li>
<li>静态资源CDN部署 —— 优化网络请求</li>
<li>更资源发布路径实现非覆盖式发布 —— 平滑升级</li>
</ul>
<h4 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h4><p><a href="http://www.infoq.com/cn/articles/front-end-engineering-and-performance-optimization-part2" target="_blank" rel="external">百度前端工具架构师</a><br><a href="http://fis.baidu.com/" target="_blank" rel="external">百度fis官方网站</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/性能/">性能</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/05/31/移动端开发/各个浏览器对domloaded触发时机/" title="移动端很容易忽略的东西" itemprop="url">移动端很容易忽略的东西</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="slashhuang" target="_blank" itemprop="author">slashhuang</a>
		
  <p class="article-time">
    <time datetime="2016-05-30T16:00:14.000Z" itemprop="datePublished"> Published 2016-05-31</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h2><blockquote>
<ol>
<li>熟悉jquery的同学一定对ready函数非常熟悉，然而又有多少人对这个ready有个很好的认识呢。<br>什么才算DOMContentLoaded？</li>
<li>现在webpack流行，打包css为一个bundle有什么缺点？<br>为什么css文件必须要放在html头上，放在尾部会有什么后果</li>
</ol>
</blockquote>
<h3 id="举几个例子"><a href="#举几个例子" class="headerlink" title="举几个例子"></a>举几个例子</h3><ol>
<li><blockquote>
<p>setTimeout(()=&gt;{},0)<br>上面的这个函数肯定会在DOMContentLoaded之后触发<br>重新摘录MDN对DOMContentLoaded事件的解释:<br>The DOMContentLoaded event is fired when the initial HTML document has been completely loaded and parsed,<br>without waiting for stylesheets, images, and subframes to finish loading.<br>重新摘录MDN对lLoad事件的解释:<br>A very different event - load - should be used only to detect a fully-loaded page.</p>
</blockquote>
</li>
<li><blockquote>
<p>第二个问题着实让我很头大。因为最近写了slide-swipe移动端手势库，<br>发现如果采用webpack方案会让offsetWidth在ios模拟器里面取值出错，chrome和火狐浏览器是不会报错的。<br>这个很小的bug最后的解决方案是把css提取出来放在html头部。</p>
</blockquote>
</li>
</ol>
<h3 id="再思考"><a href="#再思考" class="headerlink" title="再思考"></a>再思考</h3><ol>
<li><p>毕竟前端代码很多时候脱离不了浏览器，所以理解浏览器运行机制必不可少。</p>
<blockquote>
<p>之前我翻译过浏览器的运行机制文章。正如文章所说: 渲染首屏页面依赖于cssOM和DOM两块，<br>如果没有css信息，最典型的一点就是没有layout布局。<br>有的浏览器是可以在加载外部css文件的时候触发重绘重排的，但是有的则要在下个循环做这件事。<br>虽然在js执行的过程中，如果对DOM执行setter和getter会触发重绘重排，但是这样得到的数据往往只是中间值。<br>比如element.offsetWidth等等，它的值是不精确的。</p>
</blockquote>
</li>
<li><p>针对上述问题，最好的方式莫过于把css放在头部，保证dom的layout信息比较完备，已经适合js来获取相关信息了。</p>
<blockquote>
<p>这个问题实在是比较纠结，最好的方式还是看浏览器的渲染执行线。</p>
</blockquote>
</li>
</ol>
<h3 id="学习过程中顺便发现的资料"><a href="#学习过程中顺便发现的资料" class="headerlink" title="学习过程中顺便发现的资料"></a>学习过程中顺便发现的资料</h3><p><a href="https://developers.google.com/speed/docs/insights/OptimizeCSSDelivery" target="_blank" rel="external">css优化策略</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/移动端/">移动端</a><a href="/tags/浏览器/">浏览器</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/05/24/移动端开发/移动端事件触发顺序/" title="移动端手势处理" itemprop="url">移动端手势处理</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="slashhuang" target="_blank" itemprop="author">slashhuang</a>
		
  <p class="article-time">
    <time datetime="2016-05-23T16:00:14.000Z" itemprop="datePublished"> Published 2016-05-24</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><blockquote>
<p>做过移动开的同学都知道，苹果手机在滚动的时候是具有弹性距离的。<br>最难处理的一点就是，你要在页面里面的某一块做垂直滚动的处理。<br>这个时候往往会触发整个屏幕的整体移动,这个是个非常头疼的问题</p>
</blockquote>
<h2 id="解决问题"><a href="#解决问题" class="headerlink" title="解决问题"></a>解决问题</h2><blockquote>
<p>笔者最近在封装一套移动端的手势库，对于这个问题做了一定的研究，下面给出解决方案。</p>
</blockquote>
<h2 id="解决原理"><a href="#解决原理" class="headerlink" title="解决原理"></a>解决原理</h2><ul>
<li>document的touchmove事件在scroll之前触发</li>
<li>事件是可以冒泡的</li>
</ul>
<h2 id="针对以上解决原理，解决移动端的hack方案如下"><a href="#针对以上解决原理，解决移动端的hack方案如下" class="headerlink" title="针对以上解决原理，解决移动端的hack方案如下"></a>针对以上解决原理，解决移动端的hack方案如下</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">在全局环境下，加上如下代码即可</span><br><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">'touchmove'</span>,()=&gt;&#123;&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><blockquote>
<p>是不是很神奇？笔者针对这个hack方案做了不少实验，包括事件冒泡顺序及scroll和touchmove处理。<br>最后的结论就是通过冒泡，让你针对的dom节点优先移动，然后document的事件才会执行。<br>由于你自己写了touchmove，因此劫持了原生的处理方案，使得scroll没被触发。</p>
</blockquote>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/移动端/">移动端</a><a href="/tags/手势/">手势</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>







  <nav id="page-nav" class="clearfix">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><a class="extend next" rel="next" href="/page/2/">Next<span></span></a>
  </nav>

</div>
      <div class="openaside"><a class="navbutton" href="#" title="Show Sidebar"></a></div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="Hide Sidebar"></a></div>
<aside class="clearfix">

  
<div class="github-card">
<p class="asidetitle">Github Card</p>
<div class="github-card" data-github="slashhuang" data-width="220" data-height="119" data-theme="medium">
<script type="text/javascript" src="//cdn.jsdelivr.net/github-cards/latest/widget.js" ></script>
</div>
  </div>



  
<div class="categorieslist">
	<p class="asidetitle">Categories</p>
		<ul>
		
		  
			<li><a href="/categories/IOS开发/" title="IOS开发">IOS开发<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/JavaScript算法/" title="JavaScript算法">JavaScript算法<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Javascript/" title="Javascript">Javascript<sup>54</sup></a></li>
		  
		
		  
			<li><a href="/categories/Javascript/reactJS/" title="reactJS">reactJS<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/reactJS/" title="reactJS">reactJS<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/Javascript/reactJS/技术及生活日记/" title="技术及生活日记">技术及生活日记<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Javascript/技术及生活日记/" title="技术及生活日记">技术及生活日记<sup>1</sup></a></li>
		  
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">Tags</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/移动端/" title="移动端">移动端<sup>6</sup></a></li>
			
		
			
				<li><a href="/tags/react-native/" title="react-native">react-native<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/性能/" title="性能">性能<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/javascript/" title="javascript">javascript<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/浏览器/" title="浏览器">浏览器<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/css/" title="css">css<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/react/" title="react">react<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/week-note/" title="week-note">week-note<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/requirejs/" title="requirejs">requirejs<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/web通信/" title="web通信">web通信<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/angular/" title="angular">angular<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/gulp/" title="gulp">gulp<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/nodejs/" title="nodejs">nodejs<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/南京大学/" title="南京大学">南京大学<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/redux/" title="redux">redux<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/css3/" title="css3">css3<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/算法/" title="算法">算法<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/swift/" title="swift">swift<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/手势/" title="手势">手势<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/webpack/" title="webpack">webpack<sup>1</sup></a></li>
			
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">Links</p>
    <ul>
        
          <li>
            
            	<a href="http://pandakeeper.net" target="_blank" title="作者阿里云地址">作者阿里云地址</a>
            
          </li>
        
          <li>
            
            	<a href="https://github.com/future-team" target="_blank" title="Future-team前端">Future-team前端</a>
            
          </li>
        
          <li>
            
            	<a href="http://daib13.github.io/" target="_blank" title="戴博士日志">戴博士日志</a>
            
          </li>
        
    </ul>
</div>

  


</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> FE developer and github contributor <br/>
			因上努力，果上随缘</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		
		<a href="https://github.com/slashhuang" target="_blank" class="icon-github" title="github"></a>
		
		
		
		
		
		
		
		<a href="http://www.zhihu.com/people/huang-da-xian-14-14" target="_blank" class="icon-zhihu" title="知乎"></a>
		
		
		
		<a href="mailto:627284482@qq.com" target="_blank" class="icon-email" title="Email Me"></a>
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2016 
		
		<a href="/about" target="_blank" title="slashhuang">slashhuang</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
        
    }
  });
});
</script>










<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?e6d1f421bbc9962127a50488f9ed37d1";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="Back to Top"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
 </html>
